{% extends '::layout.html.twig' %}

{% block title title %}

{% block content %}
	<h1 class="ui header">{{ block('title') }}</h1>

    <table class="ui compact table">
        <thead>
            <tr>
                <th style="padding: 0em .7em;">Titre</th>
                {{ knp_pagination_sortable(projects, "Date de dépôt", 'p.depositDate') }}
                {{ knp_pagination_sortable(projects, "Délais", 'p.delay') }}
                {{ knp_pagination_sortable(projects, "Statut", 'p.state') }}
                <th style="padding: 0em;">RBU</th>
                <th style="padding: 0em;">Commercial</th>
                <th style="padding: 0em;">Réalisateur(s)</th>
                <th style="padding: 0em;">Actions</th>
            </tr>
        </thead>
        <tbody>
        {% import 'JuniorEsieeBusinessBundle:Project:helper.html.twig' as helper %}
        {% for project in projects %}
            <tr>
                <td><a href="{{ path('je_business_project_show', {id:project.id}) }}" class="item">{{ project.title }}</a></td>
                <td>{{ project.depositDate|format_date('dd/MM/yy', 'fr', 'Europe/Paris') }}</td>
                <td>{{ project.delay|format_date('dd/MM/yy', 'fr', 'Europe/Paris') }}</td>
                <td>
                    {{ helper.projectState(project) }}
                </td>
                <td>{{ project.rbu|linkUser }}</td>
                <td>{{ project.commercial|linkUser }}</td>
                <td>
                    {% for student in project.students %}
                        {{ student|linkUser }}{% if not loop.last %}, {% endif %}
                    {% else %}
                        Aucun
                    {% endfor %}
                </td>
                <td>
                    {% include 'JuniorEsieeBusinessBundle:Project:actions.html.twig' with {'show': false} %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">
                    Aucun AP
                </td>
            </tr>
        {% endfor %}
        </tbody>
        <tfoot>
        <tr>
            <th colspan="8">
                <a class="ui green labeled icon button" href="{{ path('je_business_project_new') }}">
                    Nouveau <i class="plus icon"></i>
                </a>
                {{ knp_pagination_render(projects) }}
            </th>
        </tr>
        </tfoot>
    </table>

{% endblock %}
