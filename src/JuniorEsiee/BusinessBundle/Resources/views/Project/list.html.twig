{% extends '::layout.html.twig' %}

{% block title title %}

{% block content %}
	<h1 class="ui header">{{ block('title') }}</h1>

    <table class="ui compact table">
        <thead>
            <tr>
                <th style="padding: 0em .7em;">Titre</th>
                {{ knp_pagination_sortable(projects, "Date de dépôt", 'p.depositDate') }}
                {{ knp_pagination_sortable(projects, "Délais", 'p.delay') }}
                {{ knp_pagination_sortable(projects, "Statut", 'p.state') }}
                <th style="padding: 0em;">Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for project in projects %} {# une boucle "For Each" afin de parcourir tous les AP #}
            <tr>
                <td>{{ project.title }}</td>
                <td>{{ project.depositDate|format_date }}</td> {# format_date est une fonction de formatage de la date #}
                <td>{{ project.delay|format_date }}</td>
                <td>{{ project.state|trans({},'JuniorEsieeBusinessBundle') }}</td>
                <td>
                    <div class="ui labeled icon top right pointing dropdown mini button">
                        <i class="settings icon"></i>
                        Actions
                        <div class="menu">
                            {# génération d'une URL à partir du nom de la route #}
                            <a href="{{ path('je_business_project_show', {id:project.id}) }}" class="item">
                                <i class="unhide icon"></i> Afficher
                            </a>
                            <a href="{{ path('je_business_project_edit', {id:project.id}) }}" class="item">
                                <i class="pencil icon"></i> Editer
                            </a>
                            {% if project.scopeStatement is not null %}
                                <a href="{{ path('sonata_media_download', {'id': project.scopeStatement|sonata_urlsafeid }) }}" class="item">
                                    <i class="file icon"></i> Cahier des charges
                                </a>
                            {% endif %}
                            {% if project.graphicCharter is not null %}
                                <a href="{{ path('sonata_media_download', {'id': project.graphicCharter|sonata_urlsafeid }) }}" class="item">
                                    <i class="file icon"></i> Charte graphique
                                </a>
                            {% endif %}
                            <a href="{{ path('je_business_project_delete_confirmation', {id:project.id}) }}" class="item">
                                <i class="delete icon"></i> Supprimer
                            </a>
                        </div>
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="6">
                    Aucun AP
                </td>
            </tr>
        {% endfor %}
        </tbody>
        <tfoot>
        <tr>
            <th colspan="6">
                <a class="ui green labeled icon button" href="{{ path('je_business_project_new') }}">
                    Nouveau <i class="plus icon"></i>
                </a>
                {{ knp_pagination_render(projects) }}
            </th>
        </tr>
        </tfoot>
    </table>

{% endblock %}
